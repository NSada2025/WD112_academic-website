---
layout: compress
---

{% include base_path %}

<!doctype html>
<html lang="{{ site.locale | slice: 0,2 }}" class="no-js">
  <head>
    {% include head.html %}
    {% include head/custom.html %}
  </head>

  <body>

    {% include skip-links.html %}
    {% include browser-upgrade.html %}
    {% include masthead.html %}

    <main id="main" role="main">
      {{ content }}
    </main>

    <div class="page__footer">
      <footer>
        {% include footer/custom.html %}
        {% include footer.html %}
      </footer>
    </div>

    <!-- Theme controls -->
    <div class="theme-controls">
      <button class="dark-mode-toggle" id="darkModeToggle" aria-label="Toggle dark mode" onclick="if(window.toggleDarkMode) window.toggleDarkMode(); else console.log('Function not ready');">
        <i class="fas fa-moon" id="dark-mode-icon"></i>
      </button>
      <button class="color-picker-toggle" id="colorPickerToggle" aria-label="Change color theme" onclick="if(window.toggleColorPicker) window.toggleColorPicker(); else console.log('Function not ready');">
        <i class="fas fa-palette"></i>
      </button>
    </div>
    
    <!-- Color picker panel -->
    <div class="color-picker-panel" id="colorPickerPanel">
      <h3>Choose Theme Color</h3>
      <div class="color-options">
        <button class="color-option blue" data-color="default" aria-label="Blue theme">
          <span class="color-preview"></span>
          <span class="color-name">Blue</span>
        </button>
        <button class="color-option zinc" data-color="zinc" aria-label="Zinc theme">
          <span class="color-preview"></span>
          <span class="color-name">Zinc</span>
        </button>
        <button class="color-option rose" data-color="rose" aria-label="Rose theme">
          <span class="color-preview"></span>
          <span class="color-name">Rose</span>
        </button>
        <button class="color-option green" data-color="green" aria-label="Green theme">
          <span class="color-preview"></span>
          <span class="color-name">Green</span>
        </button>
        <button class="color-option violet" data-color="violet" aria-label="Violet theme">
          <span class="color-preview"></span>
          <span class="color-name">Violet</span>
        </button>
        <button class="color-option orange" data-color="orange" aria-label="Orange theme">
          <span class="color-preview"></span>
          <span class="color-name">Orange</span>
        </button>
      </div>
    </div>

    {% include scripts.html %}

    <!-- Theme management script -->
    <script>
      console.log('Script starting...');
      
      // Define functions immediately
      window.toggleDarkMode = function() {
        console.log('toggleDarkMode called');
        var currentTheme = document.documentElement.getAttribute('data-theme');
        var newTheme = currentTheme === 'dark' ? 'light' : 'dark';
        
        document.documentElement.setAttribute('data-theme', newTheme);
        localStorage.setItem('theme', newTheme);
        
        var icon = document.getElementById('dark-mode-icon');
        if (icon) {
          icon.className = newTheme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
        }
      };
      
      window.toggleColorPicker = function() {
        console.log('toggleColorPicker called');
        var panel = document.getElementById('colorPickerPanel');
        if (panel) {
          panel.classList.toggle('show');
        }
      };
      
      console.log('Functions defined');
      
      // Check for saved preferences
      var currentTheme = localStorage.getItem('theme') || 'light';
      var currentColor = localStorage.getItem('color') || 'default';
      
      console.log('Current theme:', currentTheme);
      console.log('Current color:', currentColor);
      
      document.documentElement.setAttribute('data-theme', currentTheme);
      document.documentElement.setAttribute('data-color', currentColor);
      
      // Update icon based on current theme
      if (currentTheme === 'dark') {
        var icon = document.getElementById('dark-mode-icon');
        if (icon) {
          icon.className = 'fas fa-sun';
        }
      }
      
      // Set up color options when DOM is ready
      window.addEventListener('load', function() {
        console.log('Window loaded, setting up color options');
        
        // Mark active color
        var activeColorSelector = '[data-color="' + currentColor + '"]';
        var activeColor = document.querySelector(activeColorSelector);
        if (activeColor) {
          activeColor.classList.add('active');
        }
        
        // Handle color selection
        var colorOptions = document.querySelectorAll('.color-option');
        console.log('Found color options:', colorOptions.length);
        
        colorOptions.forEach(function(button) {
          button.addEventListener('click', function() {
            var color = this.getAttribute('data-color');
            console.log('Color selected:', color);
            
            // Remove active class from all buttons
            colorOptions.forEach(function(btn) {
              btn.classList.remove('active');
            });
            
            // Add active class to clicked button
            this.classList.add('active');
            
            // Apply color
            document.documentElement.setAttribute('data-color', color);
            localStorage.setItem('color', color);
            
            // Close panel after selection
            setTimeout(function() {
              var panel = document.getElementById('colorPickerPanel');
              if (panel) {
                panel.classList.remove('show');
              }
            }, 200);
          });
        });
      });
      
      console.log('Script completed');
    </script>

  </body>
</html>
