---
layout: compress
---

{% include base_path %}

<!doctype html>
<html lang="{{ site.locale | slice: 0,2 }}" class="no-js">
  <head>
    {% include head.html %}
    {% include head/custom.html %}
  </head>

  <body>

    {% include skip-links.html %}
    {% include browser-upgrade.html %}
    {% include masthead.html %}

    <main id="main" role="main">
      {{ content }}
    </main>

    <div class="page__footer">
      <footer>
        {% include footer/custom.html %}
        {% include footer.html %}
      </footer>
    </div>

    <!-- Theme controls -->
    <div class="theme-controls">
      <button class="dark-mode-toggle" id="darkModeToggle" aria-label="Toggle dark mode">
        <i class="fas fa-moon" id="dark-mode-icon"></i>
      </button>
      <button class="color-picker-toggle" id="colorPickerToggle" aria-label="Change color theme">
        <i class="fas fa-palette"></i>
      </button>
    </div>
    
    <!-- Color picker panel -->
    <div class="color-picker-panel" id="colorPickerPanel">
      <h3>Choose Theme Color</h3>
      <div class="color-options">
        <button class="color-option blue" data-color="default" aria-label="Blue theme">
          <span class="color-preview"></span>
          <span class="color-name">Blue</span>
        </button>
        <button class="color-option zinc" data-color="zinc" aria-label="Zinc theme">
          <span class="color-preview"></span>
          <span class="color-name">Zinc</span>
        </button>
        <button class="color-option rose" data-color="rose" aria-label="Rose theme">
          <span class="color-preview"></span>
          <span class="color-name">Rose</span>
        </button>
        <button class="color-option green" data-color="green" aria-label="Green theme">
          <span class="color-preview"></span>
          <span class="color-name">Green</span>
        </button>
        <button class="color-option violet" data-color="violet" aria-label="Violet theme">
          <span class="color-preview"></span>
          <span class="color-name">Violet</span>
        </button>
        <button class="color-option orange" data-color="orange" aria-label="Orange theme">
          <span class="color-preview"></span>
          <span class="color-name">Orange</span>
        </button>
      </div>
    </div>

    {% include scripts.html %}

    <!-- Theme management script -->
    <script>
      // Check for saved preferences
      const currentTheme = localStorage.getItem('theme') || 'light';
      const currentColor = localStorage.getItem('color') || 'default';
      
      document.documentElement.setAttribute('data-theme', currentTheme);
      document.documentElement.setAttribute('data-color', currentColor);
      
      // Update icon based on current theme
      if (currentTheme === 'dark') {
        document.getElementById('dark-mode-icon').className = 'fas fa-sun';
      }
      
      // Wait for DOM to be ready
      document.addEventListener('DOMContentLoaded', function() {
        console.log('DOM loaded, setting up theme controls...');
        
        // Mark active color
        const activeColor = document.querySelector(`[data-color="${currentColor}"]`);
        if (activeColor) {
          activeColor.classList.add('active');
        }
        
        // Set up dark mode toggle
        const darkModeToggle = document.getElementById('darkModeToggle');
        console.log('Dark mode toggle element:', darkModeToggle);
        
        if (darkModeToggle) {
          darkModeToggle.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            console.log('Dark mode button clicked');
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            
            // Update icon
            const icon = document.getElementById('dark-mode-icon');
            icon.className = newTheme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
          });
        } else {
          console.error('Dark mode toggle button not found!');
        }
        
        // Set up color picker toggle
        const colorPickerToggle = document.getElementById('colorPickerToggle');
        console.log('Color picker toggle element:', colorPickerToggle);
        
        if (colorPickerToggle) {
          colorPickerToggle.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            console.log('Color picker button clicked');
            const panel = document.getElementById('colorPickerPanel');
            if (panel) {
              panel.classList.toggle('show');
              console.log('Color picker toggled:', panel.classList.contains('show'));
            } else {
              console.error('Color picker panel not found');
            }
          });
        } else {
          console.error('Color picker toggle button not found!');
        }
        
        // Handle color selection
        document.querySelectorAll('.color-option').forEach(button => {
          button.addEventListener('click', function() {
            const color = this.getAttribute('data-color');
            
            // Remove active class from all buttons
            document.querySelectorAll('.color-option').forEach(btn => {
              btn.classList.remove('active');
            });
            
            // Add active class to clicked button
            this.classList.add('active');
            
            // Apply color
            document.documentElement.setAttribute('data-color', color);
            localStorage.setItem('color', color);
            
            // Close panel after selection
            setTimeout(() => {
              document.getElementById('colorPickerPanel').classList.remove('show');
            }, 200);
          });
        });
        
        // Close color picker when clicking outside
        document.addEventListener('click', function(event) {
          const panel = document.getElementById('colorPickerPanel');
          const colorButton = document.getElementById('colorPickerToggle');
          
          if (panel && colorButton && !panel.contains(event.target) && !colorButton.contains(event.target)) {
            panel.classList.remove('show');
          }
        });
      });
    </script>

  </body>
</html>
